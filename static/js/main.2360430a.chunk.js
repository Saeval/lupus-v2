(this["webpackJsonplupus-v2"]=this["webpackJsonplupus-v2"]||[]).push([[0],{12:function(e,t,s){},13:function(e,t,s){},15:function(e,t,s){"use strict";s.r(t);var a=s(1),r=s.n(a),i=s(7),l=s.n(i),o=(s(12),s(13),s(2)),n=s(3),c=s(5),h=s(4),u=s(0),d=function(e){Object(c.a)(s,e);var t=Object(h.a)(s);function s(){return Object(o.a)(this,s),t.apply(this,arguments)}return Object(n.a)(s,[{key:"buildOptions",value:function(e){if(e<6)return null;var t=[];t.push(Object(u.jsx)("option",{value:-1,children:"--"},-1));for(var s=6;s<=e;s++)t.push(Object(u.jsx)("option",{value:s,children:s},s));return t}},{key:"render",value:function(){return Object(u.jsxs)("div",{className:"col-xs-12",children:[Object(u.jsxs)("div",{className:"big-text col-xs-3 col-xs-offset-4",children:["How many players are there?",Object(u.jsx)("select",{id:"numberOfPlayers",className:"left-margin numeric-select-width",onChange:this.props.handleNumberOfPlayersSelection,defaultValue:this.props.selectedNumberOfPlayers>0?this.props.selectedNumberOfPlayers:-1,children:this.buildOptions(this.props.maxPlayers)})]}),Object(u.jsx)("button",{className:"btn btn-primary col-xs-1",onClick:this.props.handleNumberOfPlayersConfirm,children:"Confirm"})]})}}]),s}(a.Component),f=d,m=function(e){Object(c.a)(s,e);var t=Object(h.a)(s);function s(){return Object(o.a)(this,s),t.apply(this,arguments)}return Object(n.a)(s,[{key:"render",value:function(){return Object(u.jsx)("button",{className:this.props.className,onClick:this.props.goBack,children:"Go back"})}}]),s}(a.Component),y=m,v="Commoner",p="Wolf",g="Guard",b="Whore",P="Seer",j="Possessed",O=function(e){Object(c.a)(s,e);var t=Object(h.a)(s);function s(){var e;return Object(o.a)(this,s),(e=t.call(this)).state={roles:[v,p,g,b,P,j]},e}return Object(n.a)(s,[{key:"getAllRoles",value:function(){return this.state.roles}},{key:"getDefaultRole",value:function(){return this.state.roles.find((function(e){return e===v}))}},{key:"getWolfRole",value:function(){return this.state.roles.find((function(e){return e===p}))}},{key:"getGuardRole",value:function(){return this.state.roles.find((function(e){return e===g}))}},{key:"getWhoreRole",value:function(){return this.state.roles.find((function(e){return e===b}))}},{key:"getSeerRole",value:function(){return this.state.roles.find((function(e){return e===P}))}},{key:"getPossessedRole",value:function(){return this.state.roles.find((function(e){return e===j}))}},{key:"getRoleByName",value:function(e){for(var t=this.state.roles,s=0;s<t.length;s++)if(this.state.roles[s].toLowerCase()===e.toLowerCase())return this.state.roles[s];return"Role not existing"}},{key:"getMaxNumberOfWolves",value:function(e){return 6===e?1:Math.floor(e/3)}},{key:"getMaxNumberOfGuards",value:function(e){return e>5?1:0}},{key:"getMaxNumberOfWhores",value:function(e){return e>6?1:0}},{key:"getMaxNumberOfSeers",value:function(e){return e>7?1:0}},{key:"getMaxNumberOfPossessed",value:function(e){return e>8?1:0}},{key:"getMaxNumberOfCommoners",value:function(e){return e-this.getMaxNumberOfWolves(e)-this.getMaxNumberOfGuards(e)-this.getMaxNumberOfWhores(e)-this.getMaxNumberOfPossessed(e)-this.getMaxNumberOfSeers(e)}}]),s}(a.Component),N=function(e){Object(c.a)(s,e);var t=Object(h.a)(s);function s(e){var a;return Object(o.a)(this,s),(a=t.call(this,e)).state={playersNames:a.getPlayersNames(),playersRoles:a.getPlayersRoles()},a}return Object(n.a)(s,[{key:"getPlayersNames",value:function(){for(var e=[],t=0;t<this.props.selectedNumberOfPlayers;t++)e[t]=Object(u.jsxs)("div",{children:[Object(u.jsxs)("label",{children:["Player name ",t+1]},"label-"+t),Object(u.jsx)("input",{type:"text",id:"name-"+t,className:"left-margin field",onBlur:this.props.handlePlayerNameChange,defaultValue:this.props.playersNames!==[]?this.props.playerNames[t]:""},t)]},"label-input-container-"+t);return e}},{key:"getPlayersRoles",value:function(){for(var e=this,t=(new O).getAllRoles(),s=[],a=function(a){var r=void 0!==e.props.playerRoles?e.props.playerRoles[a]:t[0];s[a]=Object(u.jsx)("div",{children:Object(u.jsx)("select",{id:"role-".concat(a),className:"field text-select-width",onChange:e.props.handlePlayerRoleSelection,defaultValue:r,children:t.map((function(e){return Object(u.jsx)("option",{value:e,children:e},"role-".concat(e,"-").concat(a))}))},"".concat(r))},"select-container-".concat(a))},r=0;r<this.props.selectedNumberOfPlayers;r++)a(r);return s}},{key:"render",value:function(){return Object(u.jsxs)("div",{className:"col-xs-12",children:[Object(u.jsx)("div",{className:"col-xs-4",id:"playersNamesDiv",children:this.state.playersNames}),Object(u.jsx)("div",{className:"col-xs-3 wide-right-margin",children:this.getPlayersRoles()}),Object(u.jsx)("div",{className:"col-xs-4 col-xs-offset-2",children:Object(u.jsx)("button",{className:"col-xs-5 btn btn-primary top-margin right-margin confirm-players-button",onClick:this.props.handlePlayerDataConfirm,children:"Confirm"})}),Object(u.jsxs)("div",{className:"col-xs-4",children:[Object(u.jsx)(y,{className:"col-xs-5 btn btn-warning top-margin go-back-players-button",goBack:this.props.goBack}),Object(u.jsx)("button",{className:"col-xs-5 btn btn-info top-margin go-back-players-button",onClick:this.props.setRandomRoles,children:"Random roles"})]})]})}}]),s}(a.Component),x=function(e){Object(c.a)(s,e);var t=Object(h.a)(s);function s(){return Object(o.a)(this,s),t.apply(this,arguments)}return Object(n.a)(s,[{key:"render",value:function(){return Object(u.jsxs)("div",{className:"col-xs-12",children:[Object(u.jsx)("div",{className:"big-text text-danger col-xs-3 col-xs-offset-4",children:this.props.errorMessage}),Object(u.jsx)(y,{className:"btn btn-danger col-xs-1",goBack:this.props.goBack})]})}}]),s}(a.Component),R=x,k=function(e){Object(c.a)(s,e);var t=Object(h.a)(s);function s(){return Object(o.a)(this,s),t.apply(this,arguments)}return Object(n.a)(s,[{key:"render",value:function(){return Object(u.jsx)("div",{className:"jumbotron text-center title top-margin",children:this.props.title})}}]),s}(a.Component),C=k,S=function(e){Object(c.a)(s,e);var t=Object(h.a)(s);function s(e){var a;return Object(o.a)(this,s),(a=t.call(this,e)).state={wolves:a.getAliveWolves(),commoners:a.getAliveCommoners()},a}return Object(n.a)(s,[{key:"getAliveWolves",value:function(){for(var e=[],t=this.props.alivePlayers,s=this.props.playerNames,a=(new O).getRoleByName("wolf"),r=0;r<this.props.playerRoles.length;r++)this.props.playerRoles[r]===a&&t.includes(s[r])&&e.push(s[r]);return e}},{key:"getAliveCommoners",value:function(){var e=this.getAliveWolves();return this.props.alivePlayers.filter((function(t){return!e.includes(t)}))}},{key:"getCommonersSelect",value:function(){var e=this.state.commoners;return Object(u.jsxs)("select",{className:"field text-select-width",onChange:this.props.confirmKillSelection,children:[Object(u.jsx)("option",{value:"",children:"--"},"-1"),e.map((function(e){return Object(u.jsx)("option",{value:e,children:e},e)}))]})}},{key:"render",value:function(){var e=this.state.wolves,t=1===e.length?"Wolf ".concat(e[0],", pick someone to kill"):"Wolves ".concat(e.join(", "),", pick someone to kill");return Object(u.jsxs)("div",{className:"col-xs-12 col-xs-offset-3",children:[Object(u.jsx)("div",{className:"col-xs-4",children:t}),Object(u.jsx)("div",{className:"col-xs-5",children:this.getCommonersSelect()}),Object(u.jsx)("div",{className:"col-xs-2 col-xs-offset-2",children:Object(u.jsx)("button",{className:"col-xs-5 btn btn-primary top-margin right-margin",onClick:this.props.handleWolvesChoice,style:{marginLeft:"22em",width:"80%"},children:"Confirm"})})]})}}]),s}(a.Component),W=function(e){Object(c.a)(s,e);var t=Object(h.a)(s);function s(e){var a;return Object(o.a)(this,s),(a=t.call(this,e)).state={alivePlayers:a.props.alivePlayers,commonersVictim:"",messageFirstPart:a.setMessageFirstPart(),messageSecondPart:a.setMessageSecondPart()},a}return Object(n.a)(s,[{key:"getAlivePlayersSelect",value:function(){var e=this.state.alivePlayers;return Object(u.jsxs)("select",{className:"field text-select-width",onChange:this.props.confirmKillSelection,children:[Object(u.jsx)("option",{value:"",children:"--"},"-1"),e.map((function(e){return Object(u.jsx)("option",{value:e,children:e},e)}))]})}},{key:"setMessageFirstPart",value:function(){var e=void 0===this.props.wolvesKills?0:this.props.wolvesKills.length;return 0===e?"Nobody":1===e?"".concat(this.props.wolvesKills[0]):this.props.wolvesKills.join(" and ")}},{key:"setMessageSecondPart",value:function(){return this.props.wolvesKills===[]?"But you're bad persons, so you have to lynch someone anyway!":"But the show must go on! Discuss about who you think did it and pick someone to lynch!"}},{key:"componentWillMount",value:function(){this.props.gameEnded&&this.props.handleCommonersChoice()}},{key:"render",value:function(){return Object(u.jsxs)("div",{className:"col-xs-12 col-xs-offset-3",children:[Object(u.jsxs)("div",{className:"col-xs-4",children:[Object(u.jsx)("strong",{children:this.state.messageFirstPart})," died! ",Object(u.jsx)("br",{}),this.state.messageSecondPart]}),Object(u.jsx)("div",{className:"col-xs-5",children:this.getAlivePlayersSelect()}),Object(u.jsx)("div",{className:"col-xs-2 col-xs-offset-2",children:Object(u.jsx)("button",{className:"col-xs-5 btn btn-primary top-margin",onClick:this.props.handleCommonersChoice,children:"Conferma"})})]})}}]),s}(a.Component),w=function(e){Object(c.a)(s,e);var t=Object(h.a)(s);function s(){return Object(o.a)(this,s),t.apply(this,arguments)}return Object(n.a)(s,[{key:"render",value:function(){for(var e=[],t=new O,s=this.props.allPlayers,a=0;a<s.length;a++)if(this.props.alivePlayers.includes(s[a])){var i=s[a],l=this.props.roles[a]===t.getWolfRole()?"text-danger":"text-success";e.push({name:i,textClass:l})}return Object(u.jsxs)(r.a.Fragment,{children:[Object(u.jsx)("div",{className:"jumbotron text-center title top-margin",children:this.props.message}),Object(u.jsxs)("div",{className:"text-center",children:["Alive players at the end of the game:",Object(u.jsx)("ul",{children:e.map((function(e){return Object(u.jsx)("li",{className:e.textClass,children:e.name},e.name)}))})]})]})}}]),s}(a.Component),A=w,M=function(e){Object(c.a)(s,e);var t=Object(h.a)(s);function s(e){var a;return Object(o.a)(this,s),(a=t.call(this,e)).state={specialCharacterName:a.getName()},a}return Object(n.a)(s,[{key:"getName",value:function(){for(var e=0;e<this.props.playerRoles.length;e++)if(this.props.playerRoles[e]===this.props.specialRole)return this.props.playerNames[e]}},{key:"isSpecialCharacterAlive",value:function(){return this.props.alivePlayers.includes(this.state.specialCharacterName)}},{key:"getPlayersSelect",value:function(){var e=this,t=this.props.alivePlayers.filter((function(t){return t!==e.state.specialCharacterName}));return Object(u.jsxs)("select",{className:"field text-select-width",onChange:this.props.handleSelection,children:[Object(u.jsx)("option",{value:"",children:"--"},"-1"),t.map((function(e){return Object(u.jsx)("option",{value:e,children:e},e)}))]})}},{key:"componentWillMount",value:function(){this.props.isPlaying||this.props.confirmChoice()}},{key:"render",value:function(){var e=this.state.specialCharacterName,t=this.isSpecialCharacterAlive()?{marginLeft:"22em",width:"80%"}:{width:"80%"};return Object(u.jsxs)("div",{className:"col-xs-12 col-xs-offset-3",children:[Object(u.jsx)("div",{className:"col-xs-4",children:this.isSpecialCharacterAlive()?"".concat(this.props.specialRole," ").concat(e,", ").concat(this.props.aliveMessage):"".concat(this.props.specialRole," ").concat(e," is dead, so just pretend you are calling him")}),this.isSpecialCharacterAlive()?Object(u.jsx)("div",{className:"col-xs-5",children:this.getPlayersSelect()}):"",Object(u.jsx)("div",{className:this.isSpecialCharacterAlive()?"col-xs-2 col-xs-offset-2":"col-xs-2",children:Object(u.jsx)("button",{className:"col-xs-5 btn btn-primary top-margin right-margin",onClick:this.props.confirmChoice,style:t,children:"Confirm"})})]})}}]),s}(a.Component),E=function(e){Object(c.a)(s,e);var t=Object(h.a)(s);function s(){var e;return Object(o.a)(this,s),(e=t.call(this)).state={phases:[0,1,2,3,4,5,6,7]},e}return Object(n.a)(s,[{key:"getPhases",value:function(){return this.state.phases}},{key:"getPlayerSelectionPhase",value:function(){return this.state.phases.find((function(e){return 0===e}))}},{key:"getPlayerDataPhase",value:function(){return this.state.phases.find((function(e){return 1===e}))}},{key:"getGuardPhase",value:function(){return this.state.phases.find((function(e){return 2===e}))}},{key:"getWhorePhase",value:function(){return this.state.phases.find((function(e){return 3===e}))}},{key:"getSeerPhase",value:function(){return this.state.phases.find((function(e){return 4===e}))}},{key:"getWolvesPhase",value:function(){return this.state.phases.find((function(e){return 5===e}))}},{key:"getDayPhase",value:function(){return this.state.phases.find((function(e){return 6===e}))}},{key:"getEndGamePhase",value:function(){return this.state.phases.find((function(e){return 7===e}))}}]),s}(a.Component),B=function(e){Object(c.a)(s,e);var t=Object(h.a)(s);function s(e){var a;return Object(o.a)(this,s),(a=t.call(this,e)).state={specialCharacterName:a.getName(),hasYetToChoose:""===a.props.choice,isAlive:a.isSpecialCharacterAlive()},a}return Object(n.a)(s,[{key:"getName",value:function(){for(var e=0;e<this.props.playerRoles.length;e++)if(this.props.playerRoles[e]===(new O).getSeerRole())return this.props.playerNames[e]}},{key:"isSpecialCharacterAlive",value:function(){return this.props.alivePlayers.includes(this.getName())}},{key:"getPlayersSelect",value:function(){var e=this,t=this.props.alivePlayers.filter((function(t){return t!==e.state.specialCharacterName}));return Object(u.jsxs)("select",{className:"field text-select-width",onChange:this.props.handleSelection,defaultValue:this.props.choice,children:[Object(u.jsx)("option",{value:"",children:"--"},"-1"),t.map((function(e){return Object(u.jsx)("option",{value:e,children:e},e)}))]})}},{key:"componentWillMount",value:function(){this.props.isPlaying||this.props.continueAction()}},{key:"render",value:function(){var e=this.state.specialCharacterName,t=this.state.hasYetToChoose&&this.state.isAlive,s=this.state.isAlive?{marginLeft:"22em",width:"80%"}:{width:"80%"};return Object(u.jsxs)("div",{className:"col-xs-12 col-xs-offset-3",children:[Object(u.jsx)("div",{className:"col-xs-4",children:this.state.isAlive?"Seer ".concat(e,", pick someone whose identity you wish to know"):"Seer ".concat(e," is dead, so just pretend you are calling him")}),this.state.isAlive?Object(u.jsx)("div",{className:"col-xs-5",children:this.getPlayersSelect()}):"",Object(u.jsxs)("div",{className:this.state.isAlive?"col-xs-2 col-xs-offset-2":"col-xs-2",children:[Object(u.jsx)("button",{className:"col-xs-5 btn btn-primary top-margin right-margin ".concat(t?"disabled":""),onClick:t?null:this.props.continueAction,style:s,children:"Continue"}),void 0===this.props.confirmChoice?"":Object(u.jsx)("button",{className:"col-xs-5 btn btn-success top-margin right-margin ".concat(t?"":"disabled"),onClick:t?this.props.confirmChoice:null,style:s,children:"Confirm"}),this.state.hasYetToChoose?"":!0===this.props.supplementMessage?Object(u.jsx)("h1",{children:"YES"}):Object(u.jsx)("h1",{children:"NOPE"})]})]})}}]),s}(a.Component),G=function(e){Object(c.a)(s,e);var t=Object(h.a)(s);function s(){var e;return Object(o.a)(this,s),(e=t.call(this)).state={roles:new O,phases:new E,currentPhase:0,selectedNumberOfPlayers:-1,error:!1,errorMessage:"",playerNames:[],playerRoles:[],alivePlayers:[],wolvesKills:[],commonersKill:"",guardedPlayer:"",escortedPlayer:"",winnerMessage:"",seerChoice:"",seerMessage:""},e.setUpHandlers(),e}return Object(n.a)(s,[{key:"setUpHandlers",value:function(){this.resetError=this.resetError.bind(this),this.goToNextPhase=this.goToNextPhase.bind(this),this.goToPreviousPhase=this.goToPreviousPhase.bind(this),this.handleNumberOfPlayersSelection=this.handleNumberOfPlayersSelection.bind(this),this.handleNumberOfPlayersConfirm=this.handleNumberOfPlayersConfirm.bind(this),this.handlePlayerRoleSelection=this.handlePlayerRoleSelection.bind(this),this.handlePlayerNameChange=this.handlePlayerNameChange.bind(this),this.handlePlayerDataConfirm=this.handlePlayerDataConfirm.bind(this),this.confirmKillSelection=this.confirmKillSelection.bind(this),this.handleWolvesChoice=this.handleWolvesChoice.bind(this),this.handleCommonersChoice=this.handleCommonersChoice.bind(this),this.handleGuardSelection=this.handleGuardSelection.bind(this),this.confirmGuardChoice=this.confirmGuardChoice.bind(this),this.handleWhoreSelection=this.handleWhoreSelection.bind(this),this.confirmWhoreChoice=this.confirmWhoreChoice.bind(this),this.handleSeerSelection=this.handleSeerSelection.bind(this),this.confirmSeerChoice=this.confirmSeerChoice.bind(this),this.setRandomRoles=this.setRandomRoles.bind(this)}},{key:"render",value:function(){var e,t=this.state.currentPhase,s=this.state.roles,a=this.state.phases;return this.state.error?e=Object(u.jsx)(R,{errorMessage:this.state.errorMessage,goBack:this.resetError}):t===a.getPlayerSelectionPhase()?e=Object(u.jsx)(f,{maxPlayers:12,handleNumberOfPlayersSelection:this.handleNumberOfPlayersSelection,selectedNumberOfPlayers:this.state.selectedNumberOfPlayers,handleNumberOfPlayersConfirm:this.handleNumberOfPlayersConfirm}):t===a.getPlayerDataPhase()?e=Object(u.jsx)(N,{selectedNumberOfPlayers:this.state.selectedNumberOfPlayers,goBack:this.goToPreviousPhase,handlePlayerRoleSelection:this.handlePlayerRoleSelection,handlePlayerNameChange:this.handlePlayerNameChange,handlePlayerDataConfirm:this.handlePlayerDataConfirm,playerNames:this.state.playerNames,playerRoles:this.state.playerRoles,setRandomRoles:this.setRandomRoles}):t===a.getGuardPhase()?e=Object(u.jsx)(M,{alivePlayers:this.state.alivePlayers,isPlaying:this.isRolePlaying(s.getGuardRole()),playerNames:this.state.playerNames,playerRoles:this.state.playerRoles,handleSelection:this.handleGuardSelection,confirmChoice:this.isRolePlaying(s.getGuardRole())?this.confirmGuardChoice:this.goToNextPhase,specialRole:this.state.roles.getGuardRole(),aliveMessage:"pick someone to protect"},"Guard"):t===a.getWhorePhase()?e=Object(u.jsx)(M,{alivePlayers:this.state.alivePlayers,isPlaying:this.isRolePlaying(s.getWhoreRole()),playerNames:this.state.playerNames,playerRoles:this.state.playerRoles,handleSelection:this.handleWhoreSelection,confirmChoice:this.isRolePlaying(s.getWhoreRole())?this.confirmWhoreChoice:this.goToNextPhase,specialRole:this.state.roles.getWhoreRole(),aliveMessage:"pick someone to have fun with tonight"},"Whore"):t===a.getSeerPhase()?e=Object(u.jsx)(B,{alivePlayers:this.state.alivePlayers,isPlaying:this.isRolePlaying(s.getSeerRole()),playerNames:this.state.playerNames,playerRoles:this.state.playerRoles,handleSelection:this.handleSeerSelection,continueAction:this.goToNextPhase,confirmChoice:this.confirmSeerChoice,supplementMessage:this.state.seerMessage,choice:this.state.seerChoice},this.state.seerMessage):t===a.getWolvesPhase()?e=Object(u.jsx)(S,{alivePlayers:this.state.alivePlayers,playerRoles:this.state.playerRoles,playerNames:this.state.playerNames,confirmKillSelection:this.confirmKillSelection,handleWolvesChoice:this.handleWolvesChoice}):t===a.getDayPhase()?e=Object(u.jsx)(W,{wolvesKills:this.state.wolvesKills,alivePlayers:this.state.alivePlayers,confirmKillSelection:this.confirmKillSelection,handleCommonersChoice:this.handleCommonersChoice,gameEnded:this.gameEnded(this.state.alivePlayers)}):t===a.getEndGamePhase()&&(e=Object(u.jsx)(A,{message:this.state.winnerMessage,alivePlayers:this.state.alivePlayers,allPlayers:this.state.playerNames,roles:this.state.playerRoles})),Object(u.jsxs)("div",{className:"col-xs-12",children:[Object(u.jsx)(C,{title:"Welcome to Lupus in Fabula!"}),e]})}},{key:"goToNextPhase",value:function(){var e=this.state.currentPhase,t=this.state.phases.getGuardPhase();e!==this.state.phases.getDayPhase()||this.gameEnded(this.state.alivePlayers)?this.setState({currentPhase:e+1}):this.setState({currentPhase:t})}},{key:"goToPreviousPhase",value:function(){var e=this.state.currentPhase;this.setState({currentPhase:e-1})}},{key:"isRolePlaying",value:function(e){return this.getNumberOfPlayersWithRole(e)>0}},{key:"resetError",value:function(){this.setState({error:!1,errorMessage:""})}},{key:"handleNumberOfPlayersSelection",value:function(e){this.setState({selectedNumberOfPlayers:e.target.value}),this.initializePlayerFields(e.target.value)}},{key:"handleNumberOfPlayersConfirm",value:function(){this.state.selectedNumberOfPlayers>=6?this.goToNextPhase():this.setErrorMessage("Select a proper number of players!")}},{key:"handlePlayerRoleSelection",value:function(e){var t=this.state.playerRoles,s=e.target.value;t[e.target.id.split("-")[1]]=s,this.setState({playerRoles:t})}},{key:"setRandomRoles",value:function(){var e=this.state.roles,t=this.state.playerRoles,s=this.state.selectedNumberOfPlayers,a=e.getMaxNumberOfWolves(s),r=e.getMaxNumberOfGuards(s),i=e.getMaxNumberOfWhores(s),l=e.getMaxNumberOfSeers(s),o=e.getMaxNumberOfCommoners(s),n=e.getMaxNumberOfPossessed(s);this.removeDefaultCommonerRole(t);for(var c=0;c<s;c++){var h=[],u=this.getNumberOfPlayersWithRole(e.getWolfRole(),t),d=this.getNumberOfPlayersWithRole(e.getGuardRole(),t),f=this.getNumberOfPlayersWithRole(e.getWhoreRole(),t),m=this.getNumberOfPlayersWithRole(e.getDefaultRole(),t),y=this.getNumberOfPlayersWithRole(e.getSeerRole(),t),v=this.getNumberOfPlayersWithRole(e.getPossessedRole(),t);this.addRoles(a-u,h,e.getWolfRole()),this.addRoles(r-d,h,e.getGuardRole()),this.addRoles(i-f,h,e.getWhoreRole()),this.addRoles(o-m,h,e.getDefaultRole()),this.addRoles(l-y,h,e.getSeerRole()),this.addRoles(n-v,h,e.getPossessedRole()),t[c]=h[Math.floor(Math.random()*h.length)]}this.setState({playerRoles:t})}},{key:"getNumberOfPlayersWithRole",value:function(e,t){return(t=void 0===t?this.state.playerRoles:t).filter((function(t){return t===e})).length}},{key:"addRoles",value:function(e,t,s){for(var a=0;a<e;a++)t.push(s)}},{key:"handlePlayerNameChange",value:function(e){var t=this.state.playerNames;t[e.target.id.split("-")[1]]=e.target.value,this.setState({playerNames:t})}},{key:"handlePlayerDataConfirm",value:function(){if(this.dataAreValid()){var e=this.state.playerNames;this.setState({alivePlayers:e}),this.goToNextPhase()}}},{key:"dataAreValid",value:function(){return this.isNumberOfWolvesAcceptable()&&this.allPlayersHaveNames()&&this.allNamesAreUnique()&&this.uniqueRolesAreReallyUnique()}},{key:"confirmKillSelection",value:function(e){var t=this.state.wolvesKills;this.isUndefinedOrEmpty(e.target.value)?t=[]:t.push(e.target.value),this.state.currentPhase===this.state.phases.getWolvesPhase()?this.setState({wolvesKills:t,commonersKill:""}):this.state.currentPhase===this.state.phases.getDayPhase()&&this.setState({commonersKill:e.target.value,wolvesKills:[],guardedPlayer:"",escortedPlayer:"",seerMessage:"",seerChoice:""})}},{key:"handleWolvesChoice",value:function(){var e=this.state.wolvesKills;if(this.areVictimsValid(e))if(this.doVictimsDie(e)){var t=this.removeFromAlivePlayers(e),s=this.gameEnded(t);s?this.goToEndGameScreen(s):this.goToNextPhase()}else this.goToNextPhase()}},{key:"handleCommonersChoice",value:function(){var e=this.state.commonersKill;if(this.areVictimsValid(e)){var t=this.removeFromAlivePlayers(e),s=this.gameEnded(t);s?this.goToEndGameScreen(s):(this.setState({wolvesKills:[]}),this.goToNextPhase())}}},{key:"setErrorMessage",value:function(e){this.setState({error:!0,errorMessage:e})}},{key:"initializePlayerFields",value:function(e){var t=this.state.playerNames,s=this.state.playerRoles;if(0===s.length)for(var a=0;a<e;a++)s.push(this.state.roles.getDefaultRole());this.resetDataForPlayersNonExistentAnymore(e,t,s),this.setState({playerNames:t}),this.setState({playerRoles:s})}},{key:"resetDataForPlayersNonExistentAnymore",value:function(e,t,s){if(this.state.playerRoles.length>e)for(var a=e;a<this.state.playerRoles.length;a++)t.pop(),s.pop()}},{key:"allNamesAreUnique",value:function(){for(var e=this,t=this.state.playerNames,s=function(s){if(t.filter((function(e){return e!==t[s]})).length<=t.length-2)return e.setErrorMessage("All players must have a unique name"),{v:!1}},a=0;a<t.length;a++){var r=s(a);if("object"===typeof r)return r.v}return!0}},{key:"isNumberOfWolvesAcceptable",value:function(){for(var e=0,t=this.state.roles.getMaxNumberOfWolves(this.state.selectedNumberOfPlayers),s=0;s<this.state.selectedNumberOfPlayers;s++)this.state.playerRoles[s]===this.state.roles.getRoleByName("wolf")&&e++;return 0===e?(this.setErrorMessage("At least a wolf has to be present"),!1):!(e>t)||(this.setErrorMessage("There are too many wolves for the number of players selected"),!1)}},{key:"allPlayersHaveNames",value:function(){if(0===this.state.playerNames.length)return this.setErrorMessage("All players must have a name"),!1;for(var e=0;e<this.state.selectedNumberOfPlayers;e++)if(this.isUndefinedOrEmpty(this.state.playerNames[e]))return this.setErrorMessage("All players must have a name!"),!1;return!0}},{key:"uniqueRolesAreReallyUnique",value:function(){var e=this.getAlivePlayersByRole(this.state.playerNames,this.state.roles.getGuardRole()).length,t=this.getAlivePlayersByRole(this.state.playerNames,this.state.roles.getWhoreRole()).length,s=this.getAlivePlayersByRole(this.state.playerNames,this.state.roles.getSeerRole()).length;return e>1?(this.setErrorMessage("Only a player can play as the ".concat(this.state.roles.getGuardRole().toLowerCase(),"!")),!1):t>1?(this.setErrorMessage("Only a player can play as the ".concat(this.state.roles.getWhoreRole().toLowerCase(),"!")),!1):!(s>1)||(this.setErrorMessage("Only a player can play as the ".concat(this.state.roles.getSeerRole().toLowerCase(),"!")),!1)}},{key:"areVictimsValid",value:function(e){return!this.isUndefinedOrEmpty(e)||(this.setErrorMessage("Select a valid victim!"),!1)}},{key:"doVictimsDie",value:function(e){if(e.includes(this.state.guardedPlayer))return this.setState({wolvesKills:[]}),!1;var t=this.getAlivePlayersByRole(this.state.alivePlayers,this.state.roles.getWhoreRole())[0],s=this.getAlivePlayersByRole(this.state.alivePlayers,this.state.roles.getWolfRole());return e.includes(t)?(this.setState({wolvesKills:[]}),!1):(this.killWhoreIfSheSleptWithWolf(s,t),this.killAlsoWhoreIfEscortedPlayerIsBetweenVictims(e,t),!0)}},{key:"removeFromAlivePlayers",value:function(e){var t=this.state.alivePlayers.filter((function(t){return!e.includes(t)}));return this.setState({alivePlayers:t}),t}},{key:"gameEnded",value:function(e){return this.wolvesHaveWon(e)?"Wolves":!!this.commonersHaveWon(e)&&"Commoners"}},{key:"goToEndGameScreen",value:function(e){this.setWinnerMessage(e),this.setState({currentPhase:this.state.phases.getEndGamePhase()})}},{key:"handleGuardSelection",value:function(e){this.setState({guardedPlayer:e.target.value})}},{key:"confirmGuardChoice",value:function(){if(this.isUndefinedOrEmpty(this.state.guardedPlayer)&&this.getAlivePlayersByRole(this.state.alivePlayers,this.state.roles.getGuardRole()).length>0)return this.setErrorMessage("Select a player!"),!1;this.goToNextPhase()}},{key:"handleWhoreSelection",value:function(e){this.setState({escortedPlayer:e.target.value})}},{key:"confirmWhoreChoice",value:function(){if(this.isUndefinedOrEmpty(this.state.escortedPlayer)&&this.getAlivePlayersByRole(this.state.alivePlayers,this.state.roles.getWhoreRole()).length>0)return this.setErrorMessage("Select a player!"),!1;this.goToNextPhase()}},{key:"confirmSeerChoice",value:function(){if(this.isUndefinedOrEmpty(this.state.seerChoice)&&this.getAlivePlayersByRole(this.state.alivePlayers,this.state.roles.getSeerRole()).length>0)return this.setErrorMessage("Select a player!"),!1;var e=this.getAlivePlayersByRole(this.state.alivePlayers,this.state.roles.getWolfRole()).includes(this.state.seerChoice);this.setState({seerMessage:e})}},{key:"handleSeerSelection",value:function(e){this.setState({seerChoice:e.target.value})}},{key:"wolvesHaveWon",value:function(e){var t=this.getWolvesSide(e),s=this.getCommonersSide(e);return t.length>=s.length}},{key:"getAlivePlayersByRole",value:function(e,t){for(var s=[],a=0;a<this.state.playerRoles.length;a++)this.state.playerRoles[a]===t&&e.includes(this.state.playerNames[a])&&s.push(this.state.playerNames[a]);return s}},{key:"getCommonersSide",value:function(e){var t=this.state.roles.getDefaultRole(),s=this.state.roles.getGuardRole(),a=this.state.roles.getWhoreRole(),r=this.state.roles.getSeerRole(),i=this.state.roles.getPossessedRole();return this.getAlivePlayersByRole(e,t).concat(this.getAlivePlayersByRole(e,s)).concat(this.getAlivePlayersByRole(e,a)).concat(this.getAlivePlayersByRole(e,i)).concat(this.getAlivePlayersByRole(e,r))}},{key:"getWolvesSide",value:function(e){var t=this.state.roles.getWolfRole();return this.getAlivePlayersByRole(e,t)}},{key:"commonersHaveWon",value:function(e){var t=this.getCommonersSide(e);return this.arrayAreEqual(e,t)}},{key:"setWinnerMessage",value:function(e){var t="".concat(e," have won!");this.setState({winnerMessage:t})}},{key:"arrayAreEqual",value:function(e,t){return e.length===t.length&&e.every((function(e){return t.includes(e)}))}},{key:"removeDefaultCommonerRole",value:function(e){for(var t=0;t<e.length;t++)e[t]=""}},{key:"isUndefinedOrEmpty",value:function(e){return void 0===e||null===e||""===e||e===[]||0===e.length}},{key:"killAlsoWhoreIfEscortedPlayerIsBetweenVictims",value:function(e,t){if(e.includes(this.state.escortedPlayer)){var s=this.state.wolvesKills;s.push(t),this.setState({wolvesKills:s})}}},{key:"killWhoreIfSheSleptWithWolf",value:function(e,t){if(e.includes(this.state.escortedPlayer)){var s=this.state.wolvesKills;s.push(t),this.setState({wolvesKills:s})}}}]),s}(a.Component),K=G,D=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function T(e){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(e){console.error("Error during service worker registration:",e)}))}l.a.render(Object(u.jsx)(K,{}),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/lupus-v2",window.location).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("/lupus-v2","/service-worker.js");D?function(e){fetch(e).then((function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):T(e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e):T(e)}))}}()}},[[15,1,2]]]);
//# sourceMappingURL=main.2360430a.chunk.js.map